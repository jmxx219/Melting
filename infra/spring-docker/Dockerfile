FROM openjdk:21-jdk

# JAR 파일을 컨테이너에 복사
COPY melting-0.0.1-SNAPSHOT.jar app.jar

# 환경 변수 설정 (Spring Profile 설정)
ENV SPRING_PROFILES_ACTIVE=prod

# 추가로 필요한 환경 변수 설정 가능
ENV DATASOURCE_URL=jdbc:postgresql://172.26.12.66:5432/melting
ENV DATASOURCE_USERNAME=dayangsung
ENV DATASOURCE_PASSWORD=melting1234!
ENV JWT_SECRET=d24084c2a22bc6f5c2d4470000044355fe9085070538c36c6a6f6ea8831ab6f7\
ENV REDIS_PASSWORD=melting1234!
ENV FASTAPI_BASEURL=http://70.12.246.171:8000
ENV ELASTICSEARCH_USERNAME=elastic
ENV ELASTICSEARCH_PASSWORD=melting1234!
ENV ELASTICSEARCH_HOST=172.26.12.66

ENTRYPOINT ["java", "-jar", "app.jar"]