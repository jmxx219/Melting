FROM openjdk:21-jdk

# JAR 파일을 컨테이너에 복사
COPY melting-0.0.1-SNAPSHOT.jar app.jar

# 환경 변수 설정 (Spring Profile 설정)
ENV SPRING_PROFILES_ACTIVE=prod

# 추가로 필요한 환경 변수 설정 가능
ENV DATASOURCE_URL=jdbc:postgresql://172.26.12.66:5432/melting
ENV DATASOURCE_USERNAME=dayangsung
ENV DATASOURCE_PASSWORD=melting1234!
ENV OAUTH2_KAKAO_CLIENT_ID=b87fb8ff7abf90f7dae1c4b2b54b2fd1
ENV OAUTH2_KAKAO_CLIENT_SECRET=M0lyhUNbiDUOTA0dvxt0qE928f4Fm78P
ENV OAUTH2_GOOGLE_CLIENT_ID=343589914003-ls5qicmojabecs5slgpc2300eudd68el.apps.googleusercontent.com
ENV OAUTH2_GOOGLE_CLIENT_SECRET=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
ENV JWT_SECRET=d24084c2a22bc6f5c2d4470000044355fe9085070538c36c6a6f6ea8831ab6f7\
ENV CLOUD_AWS_S3_BUCKET=melting-data-bucket
ENV CLOUD_AWS_CREDENTIALS_ACCESS_KEY=AKIAQZFG43ZCVMPQ4DGH
ENV CLOUD_AWS_CREDENTIALS_SECRET_KEY=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
ENV REDIS_PASSWORD=melting1234!
ENV FASTAPI_BASEURL=http://70.12.246.171:8000
ENV OPENAI_API_KEY=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
ENV ELASTICSEARCH_USERNAME=elastic
ENV ELASTICSEARCH_PASSWORD=melting1234!
ENV ELASTICSEARCH_HOST=172.26.12.66
ENV ERROR_WEBHOOK_URL=https://meeting.ssafy.com/hooks/f688z3u6sib4zmdkoqtqdn57kh


ENTRYPOINT ["java", "-jar", "app.jar"]